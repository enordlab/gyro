(this.webpackJsonpreact_gyro=this.webpackJsonpreact_gyro||[]).push([[0],{38:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var r=a(29),n=a.n(r),s=a(4),c=a(0),i=a(1),o=a(11),l=a(2),b=a(3),u=(a(38),a(20)),j=a(34),p=a(33),h=a(9),d=a.n(h),m=a(10),f=a(15),x=function(){function e(){Object(c.a)(this,e),this.container=""}return Object(i.a)(e,[{key:"transform",value:function(e,t){this.container+=e;var a=this.container.split("\r\n");this.container=a.pop(),a.forEach((function(e){return t.enqueue(e)}))}},{key:"flush",value:function(e){e.enqueue(this.container)}}]),e}(),O=Object(i.a)((function e(){var t=this;Object(c.a)(this,e),this.setApp=function(e){t.app=e},this.connect=Object(f.a)(Object(m.a)().mark((function e(){return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("serial"in navigator)){e.next=17;break}return e.prev=1,e.next=4,navigator.serial.requestPort({});case 4:return t.comm=e.sent,e.next=7,t.comm.open({baudRate:115200,bufferSize:64});case 7:t.reader=t.comm.readable.pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream(new x)).getReader(),t.writer=t.comm.writable.getWriter(),setTimeout(t.receive,100),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),document.getElementById("results").innerHTML+=e.t0.message.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"\r";case 15:e.next=18;break;case 17:document.getElementById("results").innerHTML+="The Web serial API needs to be enabled in your browser thru:\n      - <a href=edge://flags/#enable-experimental-web-platform-features>edge://flags/#enable-experimental-web-platform-features</a>\n      - <a href=chrome://flags/#enable-experimental-web-platform-features>chrome://flags/#enable-experimental-web-platform-features</a>\n      - <a href=opera://flags/#enable-experimental-web-platform-features>opera://flags/#enable-experimental-web-platform-features</a>\n  ";case 18:case"end":return e.stop()}}),e,null,[[1,12]])}))),this.receive=Object(f.a)(Object(m.a)().mark((function e(){var a,r;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.reader.read();case 2:a=e.sent,r=a.value,t.app.update(r),t.running&&setTimeout(t.receive,10);case 6:case"end":return e.stop()}}),e)}))),this.send=function(){var e=Object(f.a)(Object(m.a)().mark((function e(a){return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("send",a.length,a),a=a.substr(0,1),e.next=4,t.writer.write(t.enc.encode(a).buffer);case 4:t.receive();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.start=Object(f.a)(Object(m.a)().mark((function e(){return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"1",t.send("1\r"),t.running=!0;case 3:case"end":return e.stop()}}),e)}))),this.stop=Object(f.a)(Object(m.a)().mark((function e(){return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.running=!1;case 1:case"end":return e.stop()}}),e)}))),this.comm=void 0,this.reader=void 0,this.writer=void 0,this.enc=new TextEncoder,this.dec=new TextDecoder,this.running=!1,this.app=void 0})),v=O,g=a.p+"static/media/fi_box.7788464f.svg",w=a.p+"static/media/heading_yaw.19291b56.svg",y=a.p+"static/media/heading_mechanics.c70ba00f.svg",k=a.p+"static/media/fi_circle.0f3ed5da.svg",N=(a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p+"static/media/horizon_back.2cd546c3.svg"),_=a.p+"static/media/horizon_ball.bcc94b5c.svg",z=a.p+"static/media/horizon_circle.d636f515.svg",T=a.p+"static/media/horizon_mechanics.7a08d837.svg",M=a(7),S=30,I={width:"100%",height:"100%",position:"absolute",top:0,left:0},B=function(e){var t=e.children,a=e.showBox,r=e.size;return Object(M.jsxs)("div",{className:"instrument heading",style:{height:null!==r&&void 0!==r?r:"250px",width:null!==r&&void 0!==r?r:"250px",position:"relative",display:"inline-block",overflow:"hidden"},children:[(null===a||void 0===a||a)&&Object(M.jsx)("img",{src:g,className:"background box",style:I,alt:""}),t]})},C=function(e){var t;return Object(M.jsxs)(B,Object(s.a)(Object(s.a)({},e),{},{children:[Object(M.jsx)("div",{className:"heading box",style:Object(s.a)(Object(s.a)({},I),{},{transform:"rotate(".concat(null!==(t=-e.heading)&&void 0!==t?t:0,"deg)")}),children:Object(M.jsx)("img",{src:w,className:"box",style:I,alt:""})}),Object(M.jsxs)("div",{className:"mechanics box",style:I,children:[Object(M.jsx)("img",{src:y,className:"box",style:I,alt:""}),Object(M.jsx)("img",{src:k,className:"box",style:I,alt:""})]})]}))},P=function(e){var t,a,r=null!==(t=e.pitch)&&void 0!==t?t:0;return r>S?r=S:r<-S&&(r=-S),Object(M.jsxs)(B,Object(s.a)(Object(s.a)({},e),{},{children:[Object(M.jsxs)("div",{className:"roll box",style:Object(s.a)(Object(s.a)({},I),{},{top:"0%",transform:"rotate(".concat(null!==(a=e.roll)&&void 0!==a?a:0,"deg)")}),children:[Object(M.jsx)("img",{src:N,className:"box",alt:"",style:Object(s.a)({},I)}),Object(M.jsx)("div",{className:"pitch box",style:Object(s.a)(Object(s.a)({},I),{},{top:"".concat(.7*r,"%")}),children:Object(M.jsx)("img",{src:_,className:"box",style:I,alt:""})}),Object(M.jsx)("img",{src:z,className:"box",style:I,alt:""})]}),Object(M.jsxs)("div",{className:"mechanics box",style:I,children:[Object(M.jsx)("img",{src:T,className:"box",style:I,alt:""}),Object(M.jsx)("img",{src:k,className:"box",style:I,alt:""})]})]}))},E=function(e){var t=Object(u.b)(p.a,"11805_airplane_v2_L2.mtl"),a=Object(u.b)(j.a,"11805_airplane_v2_L2.obj",(function(e){t.preload(),e.setMaterials(t)}));return Object(M.jsx)("primitive",{object:a,"rotation-x":e.rotate.ry+Math.PI/-2,"rotation-y":-e.rotate.rx,"rotation-z":e.rotate.rz,scale:.003})},L=function(e){Object(l.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).update=function(t){var a=t.split(",").map((function(e){return Number(e)}));if(3===a.length)console.log("three",a),e.setState(Object(s.a)(Object(s.a)({},e.state),{},{rx:a[0],ry:a[1],rz:a[2]}))},e.test_update=function(){e.setState(Object(s.a)(Object(s.a)({},e.state),{},{rx:e.state.rx-.001,ry:e.state.ry+.001,rz:e.state.rz+.001}))},e.state={rx:0,ry:0,rz:0},e.serial=new v,e.serial.setApp(Object(o.a)(e)),e.buffer="",e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(M.jsxs)("div",{className:"App",children:[Object(M.jsxs)("div",{children:[Object(M.jsx)("h1",{children:"Gyro Viewer"}),"Select:",Object(M.jsx)("button",{type:"button",onClick:function(t){e.serial.connect()},children:"COM"}),"\xa0\xa0Command:",Object(M.jsx)("button",{type:"button",onClick:function(t){e.serial.start()},children:"Start"}),"\xa0",Object(M.jsx)("button",{type:"button",onClick:function(t){e.serial.stop()},children:"Stop"}),Object(M.jsx)("pre",{id:"results",children:" Messages "})]}),Object(M.jsxs)("div",{children:[Object(M.jsx)(C,{size:150,heading:180*-this.state.rz/Math.PI,showBox:!1}),Object(M.jsx)(P,{size:150,width:100,roll:180*-this.state.rx/Math.PI,pitch:180*this.state.ry/Math.PI,showBox:!1})]}),Object(M.jsxs)(u.a,{children:[Object(M.jsx)("pointLight",{position:[0,5,30]}),Object(M.jsx)(h.Suspense,{fallback:null,children:Object(M.jsx)(E,{rotate:this.state})})]})]})}}]),a}(d.a.Component),A=document.getElementById("root");n.a.render(Object(M.jsx)(L,{}),A)}},[[42,1,2]]]);
//# sourceMappingURL=main.436e3cbe.chunk.js.map